(function(r){var a=document.getElementsByTagName('input'),e=a.length,g,p,d,h,x=function(l,t,n,b,r,f){var a=new Float32Array([l,t,-n,1,1,0,l,b,-n,1,1,0,r,t,-n,1,1,0,r,b,-n,1,1,0,l,t,-f,1,1,0,l,b,-f,1,1,0,r,t,-f,1,1,0,r,b,-f,1,1,0]),indicesVolume=[0,1,0,2,1,3,2,3,4,5,4,6,5,7,6,7,0,4,1,5,2,6,3,7],c=a.BYTES_PER_ELEMENT;g.bindBuffer(g.ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ARRAY_BUFFER,a,g.STATIC_DRAW);g.vertexAttribPointer(d,3,g.FLOAT,!1,c*6,0);g.vertexAttribPointer(h,3,g.FLOAT,!1,c*6,c*3);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ELEMENT_ARRAY_BUFFER,new Uint8Array(indicesVolume),g.STATIC_DRAW);g.drawElements(g.LINES,indicesVolume.length,g.UNSIGNED_BYTE,0)},y=function(l,t,n,b,r,f){var a=f/n,c=new Float32Array([l,t,-n,1,1,0,l,b,-n,1,1,0,r,t,-n,1,1,0,r,b,-n,1,1,0,a*l,a*t,-f,1,1,0,a*l,a*b,-f,1,1,0,a*r,a*t,-f,1,1,0,a*r,a*b,-f,1,1,0,0,0,0,0.3,0.3,0]),i=[0,1,0,2,1,3,2,3,4,5,4,6,5,7,6,7,0,4,1,5,2,6,3,7,4,8,5,8,6,8,7,8],e=c.BYTES_PER_ELEMENT;g.bindBuffer(g.ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ARRAY_BUFFER,c,g.STATIC_DRAW);g.vertexAttribPointer(d,3,g.FLOAT,!1,e*6,0);g.vertexAttribPointer(h,3,g.FLOAT,!1,e*6,e*3);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ELEMENT_ARRAY_BUFFER,new Uint8Array(i),g.STATIC_DRAW);g.drawElements(g.LINES,i.length,g.UNSIGNED_BYTE,0)},z=function(a,b,c,d,e,f,h,i,j){var k=mat4.create();mat4.scale(k,k,[h,i,j]);mat4.translate(k,k,[a,b,c]);mat4.rotateZ(k,k,glMatrix.toRadian(f));mat4.rotateY(k,k,glMatrix.toRadian(e));mat4.rotateX(k,k,glMatrix.toRadian(d));g.uniformMatrix4fv(g.getUniformLocation(p,'uModelMatrix'),!1,k)},w=function(c){var a=new Float32Array([c,c,c,1,1,1,-c,c,c,1,0,1,-c,-c,c,1,0,0,c,-c,c,1,1,0,c,-c,-c,0,1,0,c,c,-c,0,1,1,-c,c,-c,0,0,1,-c,-c,-c,0,0,0]),b=new Uint8Array([0,1,2,0,2,3,0,3,4,0,4,5,0,5,6,0,6,1,1,6,7,1,7,2,7,4,3,7,3,2,4,7,6,4,6,5]),e=a.BYTES_PER_ELEMENT;g.bindBuffer(g.ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ARRAY_BUFFER,a,g.STATIC_DRAW);g.vertexAttribPointer(d,3,g.FLOAT,!1,e*6,0);g.vertexAttribPointer(h,3,g.FLOAT,!1,e*6,e*3);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ELEMENT_ARRAY_BUFFER,b,g.STATIC_DRAW);g.drawElements(g.TRIANGLES,b.length,g.UNSIGNED_BYTE,0)},q=function(e,c,u){var a=mat4.create();mat4.lookAt(a,e,c,u);g.uniformMatrix4fv(g.getUniformLocation(p,'uViewMatrix'),!1,a)},u=function(a){g.bindBuffer(g.ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ARRAY_BUFFER,new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),g.STATIC_DRAW);g.vertexAttribPointer(d,3,g.FLOAT,!1,0,0);g.bindBuffer(g.ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ARRAY_BUFFER,new Float32Array([1,0,0,1,1,0,0,1,0,1,0,1,0,1,0,1,0,0,1,1,0,0,1,1]),g.STATIC_DRAW);g.vertexAttribPointer(h,4,g.FLOAT,!1,0,0);g.drawArrays(g.LINES,0,6)},v=function(a){var b=[],c=[],i,j=4;for(i=-a;i<=a;i+=.25,j=4){b.splice.apply(b,[0,0,i,0,a,i,0,-a,a,0,i,-a,0,i]);while(j--)c.splice.apply(c,i%1?[c.length,0,.2,.2,.2,1]:[c.length,0,.6,.6,.6,1])}g.bindBuffer(g.ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ARRAY_BUFFER,new Float32Array(c),g.STATIC_DRAW);g.vertexAttribPointer(h,4,g.FLOAT,!1,0,0);g.bindBuffer(g.ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ARRAY_BUFFER,new Float32Array(b),g.STATIC_DRAW);g.vertexAttribPointer(d,3,g.FLOAT,!1,0,0);g.drawArrays(g.LINES,0,b.length/3)},t=function(e,a){var c=.1,b=new Float32Array([c/2,c/2,c,1,1,1,-c/2,c/2,c,1,1,1,-c/2,-c/2,c,1,1,1,c/2,-c/2,c,1,1,1,c/2,-c/2,-c,1,0,0,c/2,c/2,-c,1,0,0,-c/2,c/2,-c,1,0,0,-c/2,-c/2,-c,1,0,0]),f=new Uint8Array([0,1,2,0,2,3,0,3,4,0,4,5,0,5,6,0,6,1,1,6,7,1,7,2,7,4,3,7,3,2,4,7,6,4,6,5]),i=b.BYTES_PER_ELEMENT;g.bindBuffer(g.ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ARRAY_BUFFER,b,g.STATIC_DRAW);g.vertexAttribPointer(d,3,g.FLOAT,!1,i*6,0);g.vertexAttribPointer(h,3,g.FLOAT,!1,i*6,i*3);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ELEMENT_ARRAY_BUFFER,f,g.STATIC_DRAW);g.drawElements(g.TRIANGLES,f.length,g.UNSIGNED_BYTE,0);g.bindBuffer(g.ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ARRAY_BUFFER,new Float32Array([0,0,0,0,0.5,0,0,0,0,0,0,-vec3.distance(e,a)]),g.STATIC_DRAW);g.vertexAttribPointer(d,3,g.FLOAT,!1,0,0);g.bindBuffer(g.ARRAY_BUFFER,g.createBuffer());g.bufferData(g.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1,1,1,1,0,0,1,1,0,0,1]),g.STATIC_DRAW);g.vertexAttribPointer(h,4,g.FLOAT,!1,0,0);g.drawArrays(g.LINES,0,4)},m=function(id){var c=document.getElementById(id);g=initializeWebGL(c);p=initializeProgram(g,initializeShader(g,'vshader'),initializeShader(g,'fshader'));g.useProgram(p);d=g.getAttribLocation(p,'aPosition');g.enableVertexAttribArray(d);h=g.getAttribLocation(p,'aColor');g.enableVertexAttribArray(h);g.clearColor(0,0,0,1);g.clear(g.COLOR_BUFFER_BIT);g.enable(g.DEPTH_TEST);id==='d'&&g.depthFunc(g.LEQUAL);g.clear(g.DEPTH_BUFFER_BIT)},n=function(){var a=document.getElementById('type1').checked,b={},c=3,d=document.getElementsByTagName('input'),e=d.length;while(e--)d[e].type==='number'&&(b[d[e].id]=+d[e].value);b.fovy=glMatrix.toRadian(b.fovy);if(!a){b.n=+document.getElementById('np').value;b.f=+document.getElementById('fp').value;b.l=-(b.r=(b.t=b.n*Math.tan(b.fovy/2))*b.aspect);b.b=-b.t}m('c');e=mat4.create();if(a)mat4.ortho(e,b.l,b.r,b.b,b.t,b.n,b.f);else mat4.perspective(e,b.fovy,b.aspect,b.n,b.f);g.uniformMatrix4fv(g.getUniformLocation(p,'uPerspectiveMatrix'),!1,e);q([b.ex,b.ey,b.ez],[b.cx,b.cy,b.cz],[b.ux,b.uy,b.uz]);z(b.tx,b.ty,b.tz,b.rx,b.ry,b.rz,b.sx,b.sy,b.sz);w(.5);m('d');mat4.ortho((d=mat4.create()),-c,c,-c,c,-c-5,c+5);g.uniformMatrix4fv(g.getUniformLocation(p,'uPerspectiveMatrix'),!1,d);q([Math.sqrt(1/3),Math.sqrt(1/3),Math.sqrt(1/3)],[0,0,0],[0,1,0]);z(0,0,0,0,0,0,1,1,1);u(c);v(c);z(b.tx,b.ty,b.tz,b.rx,b.ry,b.rz,b.sx,b.sy,b.sz);u(1);w(.5);mat4.lookAt((d=mat4.create()),[b.ex,b.ey,b.ez],[b.cx,b.cy,b.cz],[b.ux,b.uy,b.uz]);mat4.invert((e=mat4.create()),d);g.uniformMatrix4fv(g.getUniformLocation(p,'uModelMatrix'),!1,e);t([b.ex,b.ey,b.ez],[b.cx,b.cy,b.cz]);if(a)x(b.l,b.t,b.n,b.b,b.r,b.f);else y(b.l,b.t,b.n,b.b,b.r,b.f)},_=function(){n()};_();while(e--)a[e].onchange=_;(r.onresize=function(){var b=document.getElementsByTagName('canvas'),i=b.length,c='px';while(i--)if(r.innerHeight<r.innerWidth-200){b[i].style.width=b[i].style.height=(r.innerWidth-200)/2-3+c;b[i].style.marginTop=(r.innerHeight-parseFloat(b[i].style.height))/2+c}else b[i].style.width=b[i].style.height=r.innerHeight/2-3+cdocument.getElementById('config_section').style.height=r.innerHeight+c;document.getElementById('canvas_section').style.width=r.innerWidth-200+c})()}(this));